<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Trello Dynamic Queue Power-Up</title>
  <script src="https://p.trellocdn.com/power-up.min.js"></script>
</head>
<body>
  <script>
    TrelloPowerUp.initialize({
      'board-buttons': function(t, options) {
        console.log("Board button clicked, board ID:", options.board.id);

        // Example static JSON for debugging
        const jsonData = [
          { name: "Test Task", labels: ["High"], due: null, url: "https://trello.com/c/test", board: options.board.id }
        ];

        fetch('https://script.google.com/macros/s/AKfycbxm--aVDnHHhospao_ct4WAOio5Myvsj51MnhGrBZ-2A5wXUTbCtZl8qkRch5_n6XJ39Q/exec', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(jsonData)
        })
        .then(r => console.log("Static JSON sent"))
        .catch(e => console.error("Fetch error:", e));

        return [];
      }
    });
  </script>
</body>
</html>
